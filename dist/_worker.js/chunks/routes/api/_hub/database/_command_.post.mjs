import{l as a,m as r,w as e,x as s,I as t,h as m,E as p,J as n,y as i,F as o,K as u,L as c}from"../../../../_/nitro.mjs";import{r as d}from"../../../../_/auth.mjs";import"node:async_hooks";const f=s({query:i().min(1).max(1e6).trim(),params:c().array().default([])}),l=a(async a=>{await d(a),r("database");const{command:c}=await e(a,s({command:t(["first","all","raw","run","dump","exec","batch"])}).parse),l=m();if("exec"===c){const{query:r}=await p(a,f.pick({query:!0}).parse);return l.exec(r)}if("dump"===c)return l.dump();if("first"===c){const{query:r,params:e,colName:t}=await p(a,n(f,s({colName:i().optional()})).parse);return t?l.prepare(r).bind(...e).first(t):l.prepare(r).bind(...e).first()}if("batch"===c){const r=await p(a,o(f).parse);return l.batch(r.map(a=>l.prepare(a.query).bind(...a.params)))}if("raw"===c){const{query:r,params:e,columnNames:t}=await p(a,n(f,s({columnNames:u().default(!1)})).parse);return l.prepare(r).bind(...e).raw({columnNames:t})}const{query:w,params:y}=await p(a,f.parse);return l.prepare(w).bind(...y)[c]()});export{l as default};
//# sourceMappingURL=_command_.post.mjs.map
