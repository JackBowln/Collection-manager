import{_ as e}from"./Card-Dskk1veu.mjs";import{_ as t,a}from"./Input-D0kU1oTm.mjs";import{v as o,u as r,a as l,n as s,_ as d,b as i}from"./server.mjs";import{u as n}from"./useSupabaseClient-CBvWxwze.mjs";import{A as u,y as c}from"../routes/renderer.mjs";import"../_/nitro.mjs";import"node:async_hooks";import"../_/shared.esm-bundler.mjs";const m=o.defineComponent({__name:"login",__ssrInlineRender:!0,setup(m){const f=n(),p=r(),x=l(),V=o.ref(""),v=o.ref(""),h=o.ref(!1);o.watchEffect(()=>{p.value&&s("/dashboard")});const handleLogin=async()=>{try{h.value=!0;const{error:e}=await f.auth.signInWithPassword({email:V.value,password:v.value});if(e)throw e;x.add({title:"Sucesso",description:"Login realizado com sucesso",color:"green"}),s("/dashboard")}catch(e){x.add({title:"Error",description:e.message,color:"red"})}finally{h.value=!1}},handleGoogleLogin=async()=>{const{error:e}=await f.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${(void 0).location.origin}/confirm`}});e&&x.add({title:"Error",description:e.message,color:"red"})};return(r,l,s,n)=>{const m=e,f=t,p=a,x=d,g=i;l(`<div${u(o.mergeProps({class:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900"},n))}>`),l(c(m,{class:"w-full max-w-md"},{header:o.withCtx((e,t,a,r)=>{if(!t)return[o.createVNode("h1",{class:"text-xl font-bold text-center"},"Bem-vindo de volta")];t(`<h1 class="text-xl font-bold text-center"${r}>Bem-vindo de volta</h1>`)}),footer:o.withCtx((e,t,a,r)=>{if(!t)return[o.createVNode("p",{class:"text-sm text-center text-gray-500"},[o.createTextVNode(" Não tem uma conta? "),o.createVNode(g,{to:"/register",class:"text-primary-600 hover:underline"},{default:o.withCtx(()=>[o.createTextVNode("Cadastre-se")]),_:1})])];t(`<p class="text-sm text-center text-gray-500"${r}> Não tem uma conta? `),t(c(g,{to:"/register",class:"text-primary-600 hover:underline"},{default:o.withCtx((e,t,a,r)=>{if(!t)return[o.createTextVNode("Cadastre-se")];t("Cadastre-se")}),_:1},a,r)),t("</p>")}),default:o.withCtx((e,t,a,r)=>{if(!t)return[o.createVNode("form",{onSubmit:o.withModifiers(handleLogin,["prevent"]),class:"space-y-4"},[o.createVNode(f,{label:"E-mail",name:"email"},{default:o.withCtx(()=>[o.createVNode(p,{modelValue:o.unref(V),"onUpdate:modelValue":e=>o.isRef(V)?V.value=e:null,type:"email",placeholder:"seu@email.com",required:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o.createVNode(f,{label:"Senha",name:"password"},{default:o.withCtx(()=>[o.createVNode(p,{modelValue:o.unref(v),"onUpdate:modelValue":e=>o.isRef(v)?v.value=e:null,type:"password",required:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),o.createVNode(x,{type:"submit",block:"",loading:o.unref(h)},{default:o.withCtx(()=>[o.createTextVNode("Entrar")]),_:1},8,["loading"])],32),o.createVNode("div",{class:"relative my-6"},[o.createVNode("div",{class:"absolute inset-0 flex items-center"},[o.createVNode("span",{class:"w-full border-t"})]),o.createVNode("div",{class:"relative flex justify-center text-sm"},[o.createVNode("span",{class:"px-2 bg-white dark:bg-gray-800 text-gray-500"},"Ou continue com")])]),o.createVNode(x,{block:"",color:"white",variant:"solid",icon:"i-logos-google-icon",onClick:handleGoogleLogin},{default:o.withCtx(()=>[o.createTextVNode(" Google ")]),_:1})];t(`<form class="space-y-4"${r}>`),t(c(f,{label:"E-mail",name:"email"},{default:o.withCtx((e,t,a,r)=>{if(!t)return[o.createVNode(p,{modelValue:o.unref(V),"onUpdate:modelValue":e=>o.isRef(V)?V.value=e:null,type:"email",placeholder:"seu@email.com",required:""},null,8,["modelValue","onUpdate:modelValue"])];t(c(p,{modelValue:o.unref(V),"onUpdate:modelValue":e=>o.isRef(V)?V.value=e:null,type:"email",placeholder:"seu@email.com",required:""},null,a,r))}),_:1},a,r)),t(c(f,{label:"Senha",name:"password"},{default:o.withCtx((e,t,a,r)=>{if(!t)return[o.createVNode(p,{modelValue:o.unref(v),"onUpdate:modelValue":e=>o.isRef(v)?v.value=e:null,type:"password",required:""},null,8,["modelValue","onUpdate:modelValue"])];t(c(p,{modelValue:o.unref(v),"onUpdate:modelValue":e=>o.isRef(v)?v.value=e:null,type:"password",required:""},null,a,r))}),_:1},a,r)),t(c(x,{type:"submit",block:"",loading:o.unref(h)},{default:o.withCtx((e,t,a,r)=>{if(!t)return[o.createTextVNode("Entrar")];t("Entrar")}),_:1},a,r)),t(`</form><div class="relative my-6"${r}><div class="absolute inset-0 flex items-center"${r}><span class="w-full border-t"${r}></span></div><div class="relative flex justify-center text-sm"${r}><span class="px-2 bg-white dark:bg-gray-800 text-gray-500"${r}>Ou continue com</span></div></div>`),t(c(x,{block:"",color:"white",variant:"solid",icon:"i-logos-google-icon",onClick:handleGoogleLogin},{default:o.withCtx((e,t,a,r)=>{if(!t)return[o.createTextVNode(" Google ")];t(" Google ")}),_:1},a,r))}),_:1},s)),l("</div>")}}}),f=m.setup;m.setup=(e,t)=>{const a=o.useSSRContext();return(a.modules||(a.modules=new Set)).add("pages/login.vue"),f?f(e,t):void 0};export{m as default};
//# sourceMappingURL=login-B-mDz7Nt.mjs.map
