import{_ as e}from"./Card-Bfh9rD5X.mjs";import{_ as t,a}from"./Input-CUCmPBr7.mjs";import{v as r,u as o,a as l,n as s,_ as d,b as i}from"./server.mjs";import{u as n}from"./useSupabaseClient-CktZlRub.mjs";import{A as u,y as c}from"../routes/renderer.mjs";import"../nitro/nitro.mjs";import"node:process";import"node:async_hooks";import"../_/shared.esm-bundler.mjs";const m=r.defineComponent({__name:"login",__ssrInlineRender:!0,setup(m){const f=n(),p=o(),x=l(),V=r.ref(""),h=r.ref(""),g=r.ref(!1);r.watchEffect(()=>{p.value&&s("/dashboard")});const handleLogin=async()=>{try{g.value=!0;const{error:e}=await f.auth.signInWithPassword({email:V.value,password:h.value});if(e)throw e;x.add({title:"Sucesso",description:"Login realizado com sucesso",color:"green"}),s("/dashboard")}catch(e){x.add({title:"Error",description:e.message,color:"red"})}finally{g.value=!1}},handleGoogleLogin=async()=>{const{error:e}=await f.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${(void 0).location.origin}/confirm`}});e&&x.add({title:"Error",description:e.message,color:"red"})};return(o,l,s,n)=>{const m=e,f=t,p=a,x=d,v=i;l(`<div${u(r.mergeProps({class:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900"},n))}>`),l(c(m,{class:"w-full max-w-md"},{header:r.withCtx((e,t,a,o)=>{if(!t)return[r.createVNode("h1",{class:"text-xl font-bold text-center"},"Bem-vindo de volta")];t(`<h1 class="text-xl font-bold text-center"${o}>Bem-vindo de volta</h1>`)}),footer:r.withCtx((e,t,a,o)=>{if(!t)return[r.createVNode("p",{class:"text-sm text-center text-gray-500"},[r.createTextVNode(" Não tem uma conta? "),r.createVNode(v,{to:"/register",class:"text-primary-600 hover:underline"},{default:r.withCtx(()=>[r.createTextVNode("Cadastre-se")]),_:1})])];t(`<p class="text-sm text-center text-gray-500"${o}> Não tem uma conta? `),t(c(v,{to:"/register",class:"text-primary-600 hover:underline"},{default:r.withCtx((e,t,a,o)=>{if(!t)return[r.createTextVNode("Cadastre-se")];t("Cadastre-se")}),_:1},a,o)),t("</p>")}),default:r.withCtx((e,t,a,o)=>{if(!t)return[r.createVNode("form",{onSubmit:r.withModifiers(handleLogin,["prevent"]),class:"space-y-4"},[r.createVNode(f,{label:"E-mail",name:"email"},{default:r.withCtx(()=>[r.createVNode(p,{modelValue:r.unref(V),"onUpdate:modelValue":e=>r.isRef(V)?V.value=e:null,type:"email",placeholder:"seu@email.com",required:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),r.createVNode(f,{label:"Senha",name:"password"},{default:r.withCtx(()=>[r.createVNode(p,{modelValue:r.unref(h),"onUpdate:modelValue":e=>r.isRef(h)?h.value=e:null,type:"password",required:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),r.createVNode(x,{type:"submit",block:"",loading:r.unref(g)},{default:r.withCtx(()=>[r.createTextVNode("Entrar")]),_:1},8,["loading"])],32),r.createVNode("div",{class:"relative my-6"},[r.createVNode("div",{class:"absolute inset-0 flex items-center"},[r.createVNode("span",{class:"w-full border-t"})]),r.createVNode("div",{class:"relative flex justify-center text-sm"},[r.createVNode("span",{class:"px-2 bg-white dark:bg-gray-800 text-gray-500"},"Ou continue com")])]),r.createVNode(x,{block:"",color:"white",variant:"solid",icon:"i-logos-google-icon",onClick:handleGoogleLogin},{default:r.withCtx(()=>[r.createTextVNode(" Google ")]),_:1})];t(`<form class="space-y-4"${o}>`),t(c(f,{label:"E-mail",name:"email"},{default:r.withCtx((e,t,a,o)=>{if(!t)return[r.createVNode(p,{modelValue:r.unref(V),"onUpdate:modelValue":e=>r.isRef(V)?V.value=e:null,type:"email",placeholder:"seu@email.com",required:""},null,8,["modelValue","onUpdate:modelValue"])];t(c(p,{modelValue:r.unref(V),"onUpdate:modelValue":e=>r.isRef(V)?V.value=e:null,type:"email",placeholder:"seu@email.com",required:""},null,a,o))}),_:1},a,o)),t(c(f,{label:"Senha",name:"password"},{default:r.withCtx((e,t,a,o)=>{if(!t)return[r.createVNode(p,{modelValue:r.unref(h),"onUpdate:modelValue":e=>r.isRef(h)?h.value=e:null,type:"password",required:""},null,8,["modelValue","onUpdate:modelValue"])];t(c(p,{modelValue:r.unref(h),"onUpdate:modelValue":e=>r.isRef(h)?h.value=e:null,type:"password",required:""},null,a,o))}),_:1},a,o)),t(c(x,{type:"submit",block:"",loading:r.unref(g)},{default:r.withCtx((e,t,a,o)=>{if(!t)return[r.createTextVNode("Entrar")];t("Entrar")}),_:1},a,o)),t(`</form><div class="relative my-6"${o}><div class="absolute inset-0 flex items-center"${o}><span class="w-full border-t"${o}></span></div><div class="relative flex justify-center text-sm"${o}><span class="px-2 bg-white dark:bg-gray-800 text-gray-500"${o}>Ou continue com</span></div></div>`),t(c(x,{block:"",color:"white",variant:"solid",icon:"i-logos-google-icon",onClick:handleGoogleLogin},{default:r.withCtx((e,t,a,o)=>{if(!t)return[r.createTextVNode(" Google ")];t(" Google ")}),_:1},a,o))}),_:1},s)),l("</div>")}}}),f=m.setup;m.setup=(e,t)=>{const a=r.useSSRContext();return(a.modules||(a.modules=new Set)).add("pages/login.vue"),f?f(e,t):void 0};export{m as default};
//# sourceMappingURL=login-DHWlol1x.mjs.map
