import{a as e,v as l,m as a,b as t,t as o,c as r,d as i,k as n,_ as d,f as u,e as s,s as c,g as p,q as m,w as f,x as v}from"./server.mjs";import{ab as g}from"../_/nitro.mjs";import{u as b,a as y,_ as x}from"./Input-CWRe9pxK.mjs";import{_ as h}from"./Card-CjK8ZZ2Z.mjs";import{K as V}from"../_/shared.esm-bundler.mjs";import{A as C,D as $,z as k,y as S,G as w,J as A,C as N,K as I,L as _,M as O}from"../routes/renderer.mjs";const B={wrapper:"relative flex items-start",container:"flex items-center h-5",base:"h-4 w-4 dark:checked:bg-current dark:checked:border-transparent disabled:opacity-50 disabled:cursor-not-allowed focus:ring-0 focus:ring-transparent focus:ring-offset-transparent",form:"form-radio",color:"text-{color}-500 dark:text-{color}-400",background:"bg-white dark:bg-gray-900",border:"border border-gray-300 dark:border-gray-700",ring:"focus-visible:ring-2 focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900",inner:"ms-3 flex flex-col",label:"text-sm font-medium text-gray-700 dark:text-gray-200",required:"text-sm text-red-500 dark:text-red-400",help:"text-sm text-gray-500 dark:text-gray-400",default:{color:"primary"}},j=a(i.ui.strategy,i.ui.textarea,c),R=l.defineComponent({inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rows:{type:Number,default:3},maxrows:{type:Number,default:0},autoresize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},resize:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator:e=>Object.keys(j.size).includes(e)},color:{type:String,default:()=>j.default.color,validator:e=>[...i.ui.colors,...Object.keys(j.color)].includes(e)},variant:{type:String,default:()=>j.default.variant,validator:e=>[...Object.keys(j.variant),...Object.values(j.color).flatMap(e=>Object.keys(e))].includes(e)},textareaClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur","change"],setup(e,{emit:a}){const{ui:i,attrs:n}=t("textarea",l.toRef(e,"ui"),j,l.toRef(e,"class")),{emitFormBlur:d,emitFormInput:u,inputId:s,color:c,size:p,name:f}=b(e,j),v=l.ref(g({},e.modelModifiers,{trim:!1,lazy:!1,number:!1,nullify:!1})),y=l.ref(null),autoResize=()=>{if(e.autoresize){if(!y.value)return;y.value.rows=e.rows;const l=y.value.style.overflow;y.value.style.overflow="hidden";const a=(void 0).getComputedStyle(y.value),t=Number.parseInt(a.paddingTop)+Number.parseInt(a.paddingBottom),o=Number.parseInt(a.lineHeight),{scrollHeight:r}=y.value,i=(r-t)/o;i>e.rows&&(y.value.rows=e.maxrows?Math.min(i,e.maxrows):i),y.value.style.overflow=l}},updateInput=e=>{v.value.trim&&(e=e.trim()),v.value.number&&(e=m(e)),v.value.nullify&&(e||(e=null)),a("update:modelValue",e),u()};l.watch(()=>e.modelValue,()=>{l.nextTick(autoResize)});const x=l.computed(()=>{var l,a;const t=(null==(a=null==(l=i.value.color)?void 0:l[c.value])?void 0:a[e.variant])||i.value.variant[e.variant];return o(r(i.value.base,i.value.form,i.value.rounded,i.value.placeholder,i.value.size[p.value],e.padded?i.value.padding[p.value]:"p-0",null==t?void 0:t.replaceAll("{color}",c.value),!e.resize&&"resize-none"),e.textareaClass)});return{ui:i,attrs:n,name:f,inputId:s,textarea:y,textareaClass:x,onInput:e=>{autoResize(),v.value.lazy||updateInput(e.target.value)},onChange:e=>{const l=e.target.value;a("change",l),v.value.lazy&&updateInput(l),v.value.trim&&(e.target.value=l.trim())},onBlur:e=>{a("blur",e),d()}}}});const U=R.setup;R.setup=(e,a)=>{const t=l.useSSRContext();return(t.modules||(t.modules=new Set)).add("node_modules/@nuxt/ui/dist/runtime/components/forms/Textarea.vue"),U?U(e,a):void 0};const z=e(R,[["ssrRender",function(e,a,t,o,r,i,n,d){let u;a(`<div${C(l.mergeProps({class:e.ui.wrapper},o))}><textarea${C(u=l.mergeProps({id:e.inputId,ref:"textarea",value:e.modelValue,name:e.name,rows:e.rows,required:e.required,disabled:e.disabled,placeholder:e.placeholder,class:e.textareaClass},e.attrs),"textarea")}>${$("value"in u?u.value:"")}</textarea>`),k(e.$slots,"default",{},null,a,t),a("</div>")}]]),q=a(i.ui.strategy,i.ui.radio,B),P=l.defineComponent({inheritAttrs:!1,props:{id:{type:String,default:null},value:{type:[String,Number,Boolean],default:null},modelValue:{type:[String,Number,Boolean,Object],default:null},name:{type:String,default:null},disabled:{type:Boolean,default:!1},help:{type:String,default:null},label:{type:String,default:null},required:{type:Boolean,default:!1},color:{type:String,default:()=>q.default.color,validator:e=>i.ui.colors.includes(e)},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:a}){var i;const{ui:n,attrs:d}=t("radio",l.toRef(e,"ui"),q,l.toRef(e,"class")),u=null!=(i=e.id)?i:l.useId(),s=l.inject("radio-group",null),{emitFormChange:c,color:p,name:m}=null!=s?s:b(e,q),f=l.computed({get:()=>e.modelValue,set(e){a("update:modelValue",e),s||c()}});const v=l.computed(()=>o(r(n.value.base,n.value.form,n.value.background,n.value.border,p.value&&n.value.ring.replaceAll("{color}",p.value),p.value&&n.value.color.replaceAll("{color}",p.value)),e.inputClass));return{inputId:u,ui:n,attrs:d,pick:f,name:m,inputClass:v,onChange:function(e){a("change",e.target.value)}}}});const D=P.setup;P.setup=(e,a)=>{const t=l.useSSRContext();return(t.modules||(t.modules=new Set)).add("node_modules/@nuxt/ui/dist/runtime/components/forms/Radio.vue"),D?D(e,a):void 0};const T=e(P,[["ssrRender",function(e,a,t,o,r,i,n,d){let u;a(`<div${C(l.mergeProps({class:e.ui.wrapper,"data-n-ids":e.attrs["data-n-ids"]},o))}><div class="${N(e.ui.container)}"><input${C((u=l.mergeProps({id:e.inputId,checked:O(e.pick,e.value),name:e.name,required:e.required,value:e.value,disabled:e.disabled,type:"radio",class:e.inputClass},e.attrs),l.mergeProps(u,_(u,e.pick))))}></div>`),e.label||e.$slots.label?(a(`<div class="${N(e.ui.inner)}"><label${A("for",e.inputId)} class="${N(e.ui.label)}">`),k(e.$slots,"label",{label:e.label},()=>{a(`${$(e.label)}`)},a,t),e.required?a(`<span class="${N(e.ui.required)}">*</span>`):a("\x3c!----\x3e"),a("</label>"),e.help||e.$slots.help?(a(`<p class="${N(e.ui.help)}">`),k(e.$slots,"help",{help:e.help},()=>{a(`${$(e.help)}`)},a,t),a("</p>")):a("\x3c!----\x3e"),a("</div>")):a("\x3c!----\x3e"),a("</div>")}]]),F=a(i.ui.strategy,i.ui.radioGroup,{wrapper:"relative flex items-start",fieldset:"",legend:"text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",default:{color:"primary"}}),L=a(i.ui.strategy,i.ui.radio,B),E=l.defineComponent({components:{URadio:T},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Boolean],default:""},name:{type:String,default:null},legend:{type:String,default:null},options:{type:Array,default:()=>[]},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:"value"},disabled:{type:Boolean,default:!1},color:{type:String,default:()=>F.default.color,validator:e=>i.ui.colors.includes(e)},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},uiRadio:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:a}){const{ui:o,attrs:r}=t("radioGroup",l.toRef(e,"ui"),F,l.toRef(e,"class")),{ui:i}=t("radio",l.toRef(e,"uiRadio"),L),{emitFormChange:n,color:d,name:u}=b(e,F,!1);l.provide("radio-group",{color:d,name:u});const guessOptionValue=l=>v(l,e.valueAttribute,v(l,e.optionAttribute)),guessOptionText=l=>v(l,e.optionAttribute,v(l,e.valueAttribute)),guessOptionSelected=l=>e.modelValue===guessOptionValue(l);return{ui:o,uiRadio:i,attrs:r,normalizedOptions:l.computed(()=>e.options.map(e=>(e=>["string","number","boolean"].includes(typeof e)?{value:e,label:e}:{...e,value:guessOptionValue(e),label:guessOptionText(e),selected:guessOptionSelected(e)})(e))),onUpdate:e=>{a("update:modelValue",e),a("change",e),n()}}}});const K=E.setup;E.setup=(e,a)=>{const t=l.useSSRContext();return(t.modules||(t.modules=new Set)).add("node_modules/@nuxt/ui/dist/runtime/components/forms/RadioGroup.vue"),K?K(e,a):void 0};const M=e(E,[["ssrRender",function(e,a,t,o,r,i,n,d){const u=T;a(`<div${C(l.mergeProps({class:e.ui.wrapper},o))}><fieldset${C(l.mergeProps(e.attrs,{class:e.ui.fieldset}))}>`),e.legend||e.$slots.legend?(a(`<legend class="${N(e.ui.legend)}">`),k(e.$slots,"legend",{},()=>{a(`${$(e.legend)}`)},a,t),a("</legend>")):a("\x3c!----\x3e"),a("\x3c!--[--\x3e"),w(e.normalizedOptions,o=>{a(S(u,{key:o.value,label:o.label,"model-value":e.modelValue,value:o.value,help:o.help,disabled:o.disabled||e.disabled,ui:e.uiRadio,onChange:l=>e.onUpdate(o.value)},l.createSlots({_:2},[e.$slots.label?{name:"label",fn:l.withCtx((a,t,r,i)=>{if(!t)return[l.renderSlot(e.$slots,"label",l.mergeProps({ref_for:!0},{option:o,selected:o.selected}))];k(e.$slots,"label",l.mergeProps({ref_for:!0},{option:o,selected:o.selected}),null,t,r,i)}),key:"0"}:void 0,e.$slots.help?{name:"help",fn:l.withCtx((a,t,r,i)=>{if(!t)return[l.renderSlot(e.$slots,"help",l.mergeProps({ref_for:!0},{option:o,selected:o.selected}))];k(e.$slots,"help",l.mergeProps({ref_for:!0},{option:o,selected:o.selected}),null,t,r,i)}),key:"1"}:void 0]),t))}),a("\x3c!--]--\x3e</fieldset></div>")}]]),W=l.defineComponent({__name:"CollectionAccessControl",__ssrInlineRender:!0,props:{modelValue:{},collectionId:{}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,o=a,r=n(),i=l.computed({get:()=>t.modelValue,set:e=>o("update:modelValue",e)}),s=[{value:"private",label:"Privado (Apenas eu)"},{value:"shared",label:"Compartilhado (Usuários específicos)"},{value:"public",label:'Público (Qualquer pessoa pode ver na aba "Explorar")'}],c=l.ref(""),p=l.ref(!1),m=l.ref(!1),f=l.ref([]),loadShares=async()=>{if(t.collectionId)try{const e=await $fetch(`/api/collections/${t.collectionId}/shares`);f.value=e}catch(e){console.error("Error loading shares:",e)}};l.watch(()=>t.collectionId,loadShares,{immediate:!0});const addUser=async()=>{if(c.value&&t.collectionId){m.value=!0;try{await $fetch(`/api/collections/${t.collectionId}/shares`,{method:"POST",body:{email:c.value}}),r.add({title:"Adicionado",color:"green"}),c.value="",loadShares()}catch(e){const l=404===e.statusCode?"Usuário não encontrado":409===e.statusCode?"Já compartilhado":e.message;r.add({title:"Erro",description:l,color:"red"})}finally{m.value=!1}}},removeUser=async e=>{if(confirm("Remover acesso para este usuário?"))try{await $fetch(`/api/collections/${t.collectionId}/shares/${e}`,{method:"DELETE"}),loadShares()}catch(e){r.add({title:"Erro",description:e.message,color:"red"})}};return(e,a,t,o)=>{const r=h,n=M,v=y,g=d,b=u;a(`<div${C(l.mergeProps({class:"space-y-6"},o))}>`),a(S(r,null,{header:l.withCtx((e,a,t,o)=>{if(!a)return[l.createVNode("h3",{class:"font-semibold"},"Configurações de Visibilidade")];a(`<h3 class="font-semibold"${o}>Configurações de Visibilidade</h3>`)}),default:l.withCtx((e,a,t,o)=>{if(!a)return[l.createVNode("div",{class:"space-y-4"},[l.createVNode(n,{modelValue:l.unref(i),"onUpdate:modelValue":e=>l.isRef(i)?i.value=e:null,options:s,legend:"Quem pode ver esta coleção?"},null,8,["modelValue","onUpdate:modelValue"])])];a(`<div class="space-y-4"${o}>`),a(S(n,{modelValue:l.unref(i),"onUpdate:modelValue":e=>l.isRef(i)?i.value=e:null,options:s,legend:"Quem pode ver esta coleção?"},null,t,o)),a("</div>")}),_:1},t)),"shared"===l.unref(i)?a(S(r,null,{header:l.withCtx((e,a,t,o)=>{if(!a)return[l.createVNode("h3",{class:"font-semibold"},"Compartilhado com")];a(`<h3 class="font-semibold"${o}>Compartilhado com</h3>`)}),default:l.withCtx((e,a,t,o)=>{if(!a)return[l.createVNode("div",{class:"space-y-4"},[l.createVNode("div",{class:"flex gap-2"},[l.createVNode(v,{modelValue:l.unref(c),"onUpdate:modelValue":e=>l.isRef(c)?c.value=e:null,placeholder:"Digite o e-mail do usuário...",class:"flex-1",loading:l.unref(p),onKeyup:l.withKeys(addUser,["enter"])},null,8,["modelValue","onUpdate:modelValue","loading"]),l.createVNode(g,{icon:"i-heroicons-paper-airplane",onClick:addUser,loading:l.unref(m)},{default:l.withCtx(()=>[l.createTextVNode("Adicionar")]),_:1},8,["loading"])]),0===l.unref(f).length?(l.openBlock(),l.createBlock("div",{key:0,class:"text-gray-500 text-sm italic"}," Não compartilhado com ninguém ainda. ")):(l.openBlock(),l.createBlock("div",{key:1,class:"space-y-2"},[(l.openBlock(!0),l.createBlock(l.Fragment,null,l.renderList(l.unref(f),e=>{var a,t,o,r;return l.openBlock(),l.createBlock("div",{key:e.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-800 p-2 rounded"},[l.createVNode("div",{class:"flex items-center gap-2"},[l.createVNode(b,{src:null==(a=e.profiles)?void 0:a.avatar_url,alt:null==(t=e.profiles)?void 0:t.full_name,size:"xs"},null,8,["src","alt"]),l.createVNode("div",{class:"text-sm"},[l.createVNode("div",{class:"font-medium"},l.toDisplayString((null==(o=e.profiles)?void 0:o.full_name)||"Unknown"),1),l.createVNode("div",{class:"text-xs text-gray-500"},l.toDisplayString(null==(r=e.profiles)?void 0:r.email),1)])]),l.createVNode(g,{icon:"i-heroicons-trash",color:"red",variant:"ghost",size:"xs",onClick:l=>removeUser(e.id)},null,8,["onClick"])])}),128))]))])];a(`<div class="space-y-4"${o}><div class="flex gap-2"${o}>`),a(S(v,{modelValue:l.unref(c),"onUpdate:modelValue":e=>l.isRef(c)?c.value=e:null,placeholder:"Digite o e-mail do usuário...",class:"flex-1",loading:l.unref(p),onKeyup:addUser},null,t,o)),a(S(g,{icon:"i-heroicons-paper-airplane",onClick:addUser,loading:l.unref(m)},{default:l.withCtx((e,a,t,o)=>{if(!a)return[l.createTextVNode("Adicionar")];a("Adicionar")}),_:1},t,o)),a("</div>"),0===l.unref(f).length?a(`<div class="text-gray-500 text-sm italic"${o}> Não compartilhado com ninguém ainda. </div>`):(a(`<div class="space-y-2"${o}>\x3c!--[--\x3e`),w(l.unref(f),e=>{var l,r,i,n;a(`<div class="flex justify-between items-center bg-gray-50 dark:bg-gray-800 p-2 rounded"${o}><div class="flex items-center gap-2"${o}>`),a(S(b,{src:null==(l=e.profiles)?void 0:l.avatar_url,alt:null==(r=e.profiles)?void 0:r.full_name,size:"xs"},null,t,o)),a(`<div class="text-sm"${o}><div class="font-medium"${o}>${$((null==(i=e.profiles)?void 0:i.full_name)||"Unknown")}</div><div class="text-xs text-gray-500"${o}>${$(null==(n=e.profiles)?void 0:n.email)}</div></div></div>`),a(S(g,{icon:"i-heroicons-trash",color:"red",variant:"ghost",size:"xs",onClick:l=>removeUser(e.id)},null,t,o)),a("</div>")}),a("\x3c!--]--\x3e</div>")),a("</div>")}),_:1},t)):a("\x3c!----\x3e"),a("</div>")}}}),G=W.setup;W.setup=(e,a)=>{const t=l.useSSRContext();return(t.modules||(t.modules=new Set)).add("components/CollectionAccessControl.vue"),G?G(e,a):void 0};const Q=l.useId,Z=a(i.ui.strategy,i.ui.checkbox,{wrapper:"relative flex items-start",container:"flex items-center h-5",base:"h-4 w-4 dark:checked:bg-current dark:checked:border-transparent dark:indeterminate:bg-current dark:indeterminate:border-transparent disabled:opacity-50 disabled:cursor-not-allowed focus:ring-0 focus:ring-transparent focus:ring-offset-transparent",form:"form-checkbox",rounded:"rounded",color:"text-{color}-500 dark:text-{color}-400",background:"bg-white dark:bg-gray-900",border:"border border-gray-300 dark:border-gray-700",ring:"focus-visible:ring-2 focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900",inner:"ms-3 flex flex-col",label:"text-sm font-medium text-gray-700 dark:text-gray-200",required:"text-sm text-red-500 dark:text-red-400",help:"text-sm text-gray-500 dark:text-gray-400",default:{color:"primary"}}),H=l.defineComponent({inheritAttrs:!1,props:{id:{type:String,default:()=>null},value:{type:[String,Number,Boolean,Object],default:null},modelValue:{type:[Boolean,Array],default:null},name:{type:String,default:null},disabled:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:void 0},help:{type:String,default:null},label:{type:String,default:null},required:{type:Boolean,default:!1},color:{type:String,default:()=>Z.default.color,validator:e=>i.ui.colors.includes(e)},inputClass:{type:String,default:""},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:a}){var i;const{ui:n,attrs:d}=t("checkbox",l.toRef(e,"ui"),Z,l.toRef(e,"class")),{emitFormChange:u,color:s,name:c,inputId:p}=b(e),m=null!=(i=p.value)?i:Q(),f=l.computed({get:()=>e.modelValue,set(e){a("update:modelValue",e)}}),v=l.computed(()=>o(r(n.value.base,n.value.form,n.value.rounded,n.value.background,n.value.border,s.value&&n.value.ring.replaceAll("{color}",s.value),s.value&&n.value.color.replaceAll("{color}",s.value)),e.inputClass));return{ui:n,attrs:d,toggle:f,inputId:m,name:c,inputClass:v,onChange:e=>{a("change",e.target.checked),u()}}}});const J=H.setup;H.setup=(e,a)=>{const t=l.useSSRContext();return(t.modules||(t.modules=new Set)).add("node_modules/@nuxt/ui/dist/runtime/components/forms/Checkbox.vue"),J?J(e,a):void 0};const X=e(H,[["ssrRender",function(e,a,t,o,r,i,n,d){let u;a(`<div${C(l.mergeProps({class:e.ui.wrapper,"data-n-ids":e.attrs["data-n-ids"]},o))}><div class="${N(e.ui.container)}"><input${C((u=l.mergeProps({id:e.inputId,checked:Array.isArray(e.toggle)?I(e.toggle,e.value):e.toggle,name:e.name,required:e.required,value:e.value,disabled:e.disabled,indeterminate:e.indeterminate,type:"checkbox",class:e.inputClass},e.attrs),l.mergeProps(u,_(u,e.toggle))))}></div>`),e.label||e.$slots.label?(a(`<div class="${N(e.ui.inner)}"><label${A("for",e.inputId)} class="${N(e.ui.label)}">`),k(e.$slots,"label",{label:e.label},()=>{a(`${$(e.label)}`)},a,t),e.required?a(`<span class="${N(e.ui.required)}">*</span>`):a("\x3c!----\x3e"),a("</label>"),e.help||e.$slots.help?(a(`<p class="${N(e.ui.help)}">`),k(e.$slots,"help",{help:e.help},()=>{a(`${$(e.help)}`)},a,t),a("</p>")):a("\x3c!----\x3e"),a("</div>")):a("\x3c!----\x3e"),a("</div>")}]]),Y=a(i.ui.strategy,i.ui.select,f),ee=l.defineComponent({components:{UIcon:s},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>Y.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>Y.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},size:{type:String,default:null,validator:e=>Object.keys(Y.size).includes(e)},color:{type:String,default:()=>Y.default.color,validator:e=>[...i.ui.colors,...Object.keys(Y.color)].includes(e)},variant:{type:String,default:()=>Y.default.variant,validator:e=>[...Object.keys(Y.variant),...Object.values(Y.color).flatMap(e=>Object.keys(e))].includes(e)},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:"value"},selectClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:a,slots:n}){const{ui:d,attrs:u}=t("select",l.toRef(e,"ui"),Y,l.toRef(e,"class")),{size:s,rounded:c}=p({ui:d,props:e}),{emitFormChange:m,inputId:f,color:g,size:y,name:x}=b(e,Y),h=l.computed(()=>{var e;return null!=(e=s.value)?e:y.value}),guessOptionValue=l=>v(l,e.valueAttribute,""),guessOptionText=l=>v(l,e.optionAttribute,""),normalizeOption=l=>["string","number","boolean"].includes(typeof l)?{[e.valueAttribute]:l,[e.optionAttribute]:l}:{...l,[e.valueAttribute]:guessOptionValue(l),[e.optionAttribute]:guessOptionText(l)},V=l.computed(()=>e.options.map(e=>normalizeOption(e))),C=l.computed(()=>e.placeholder?[{[e.valueAttribute]:"",[e.optionAttribute]:e.placeholder,disabled:!0},...V.value]:V.value),$=l.computed(()=>{const l=normalizeOption(e.modelValue),a=C.value.find(a=>a[e.valueAttribute]===l[e.valueAttribute]);return a?a[e.valueAttribute]:""}),k=l.computed(()=>{var l,a;const t=(null==(a=null==(l=d.value.color)?void 0:l[g.value])?void 0:a[e.variant])||d.value.variant[e.variant];return o(r(d.value.base,d.value.form,c.value,d.value.size[h.value],e.padded?d.value.padding[h.value]:"p-0",null==t?void 0:t.replaceAll("{color}",g.value),(S.value||n.leading)&&d.value.leading.padding[h.value],(w.value||n.trailing)&&d.value.trailing.padding[h.value]),e.placeholder&&!e.modelValue&&d.value.placeholder,e.selectClass)}),S=l.computed(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),w=l.computed(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),A=l.computed(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),N=l.computed(()=>e.loading&&!S.value?e.loadingIcon:e.trailingIcon||e.icon),I=l.computed(()=>r(d.value.icon.leading.wrapper,d.value.icon.leading.pointer,d.value.icon.leading.padding[h.value])),_=l.computed(()=>r(d.value.icon.base,g.value&&i.ui.colors.includes(g.value)&&d.value.icon.color.replaceAll("{color}",g.value),d.value.icon.size[h.value],e.loading&&d.value.icon.loading)),O=l.computed(()=>r(d.value.icon.trailing.wrapper,d.value.icon.trailing.pointer,d.value.icon.trailing.padding[h.value])),B=l.computed(()=>r(d.value.icon.base,g.value&&i.ui.colors.includes(g.value)&&d.value.icon.color.replaceAll("{color}",g.value),d.value.icon.size[h.value],e.loading&&!S.value&&d.value.icon.loading));return{ui:d,attrs:u,name:x,inputId:f,normalizedOptionsWithPlaceholder:C,normalizedValue:$,isLeading:S,isTrailing:w,selectClass:k,leadingIconName:A,leadingIconClass:_,leadingWrapperIconClass:I,trailingIconName:N,trailingIconClass:B,trailingWrapperIconClass:O,onInput:e=>{a("update:modelValue",e.target.value)},onChange:e=>{a("change",e.target.value),m()}}}});const le=ee.setup;ee.setup=(e,a)=>{const t=l.useSSRContext();return(t.modules||(t.modules=new Set)).add("node_modules/@nuxt/ui/dist/runtime/components/forms/Select.vue"),le?le(e,a):void 0};const ae=e(ee,[["ssrRender",function(e,a,t,o,r,i,n,d){const u=s;a(`<div${C(l.mergeProps({class:e.ui.wrapper},o))} data-v-cbc9516f><select${C(l.mergeProps({id:e.inputId,name:e.name,value:e.modelValue,required:e.required,disabled:e.disabled,class:e.selectClass},e.attrs))} data-v-cbc9516f>\x3c!--[--\x3e`),w(e.normalizedOptionsWithPlaceholder,(l,t)=>{a("\x3c!--[--\x3e"),l.children?(a(`<optgroup${A("value",l[e.valueAttribute])}${A("label",l[e.optionAttribute])} data-v-cbc9516f>\x3c!--[--\x3e`),w(l.children,(l,t)=>{a(`<option${A("value",l[e.valueAttribute])}${V(l[e.valueAttribute]===e.normalizedValue)?" selected":""}${V(l.disabled)?" disabled":""} data-v-cbc9516f>${$(l[e.optionAttribute])}</option>`)}),a("\x3c!--]--\x3e</optgroup>")):a(`<option${A("value",l[e.valueAttribute])}${V(l[e.valueAttribute]===e.normalizedValue)?" selected":""}${V(l.disabled)?" disabled":""} data-v-cbc9516f>${$(l[e.optionAttribute])}</option>`),a("\x3c!--]--\x3e")}),a("\x3c!--]--\x3e</select>"),e.isLeading&&e.leadingIconName||e.$slots.leading?(a(`<span class="${N(e.leadingWrapperIconClass)}" data-v-cbc9516f>`),k(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>{a(S(u,{name:e.leadingIconName,class:e.leadingIconClass},null,t))},a,t),a("</span>")):a("\x3c!----\x3e"),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(a(`<span class="${N(e.trailingWrapperIconClass)}" data-v-cbc9516f>`),k(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>{a(S(u,{name:e.trailingIconName,class:e.trailingIconClass,"aria-hidden":"true"},null,t))},a,t),a("</span>")):a("\x3c!----\x3e"),a("</div>")}],["__scopeId","data-v-cbc9516f"]]),te=l.defineComponent({__name:"FieldDefinition",__ssrInlineRender:!0,props:{modelValue:{}},emits:["update:modelValue","remove"],setup(e,{emit:a}){const t=e,o=a,r=l.computed({get:()=>t.modelValue,set:e=>o("update:modelValue",e)}),i=l.ref(Array.isArray(r.value.options)?r.value.options.join(", "):""),n=[{label:"Texto Curto",value:"text"},{label:"Texto Longo",value:"textarea"},{label:"Número",value:"number"},{label:"Data",value:"date"},{label:"Sim/Não",value:"boolean"},{label:"Seleção (Dropdown)",value:"select"},{label:"Múltipla Seleção",value:"multiselect"}],updateOptions=()=>{i.value.trim()?r.value.options=i.value.split(",").map(e=>e.trim()).filter(Boolean):r.value.options=[]};return l.watch(()=>r.value.type,e=>{["select","multiselect"].includes(e)||(r.value.options=null,r.value.is_dynamic=!1,i.value="")}),(e,a,t,o)=>{const u=X,c=s,p=d,m=x,f=y,v=ae;a(S(h,l.mergeProps({class:"mb-4 relative"},o),{header:l.withCtx((a,t,o,i)=>{if(!t)return[l.createVNode("div",{class:"flex justify-between items-center"},[l.createVNode("div",{class:"flex items-center gap-2"},[l.createVNode(u,{modelValue:l.unref(r).selected,"onUpdate:modelValue":e=>l.unref(r).selected=e},null,8,["modelValue","onUpdate:modelValue"]),l.createVNode(c,{name:"i-heroicons-bars-3",class:"cursor-move text-gray-400"}),l.createVNode("span",{class:"font-medium text-sm"},"Definição do Campo")]),l.createVNode(p,{color:"red",variant:"ghost",icon:"i-heroicons-trash",size:"xs",onClick:l=>e.$emit("remove")},null,8,["onClick"])])];t(`<div class="flex justify-between items-center"${i}><div class="flex items-center gap-2"${i}>`),t(S(u,{modelValue:l.unref(r).selected,"onUpdate:modelValue":e=>l.unref(r).selected=e},null,o,i)),t(S(c,{name:"i-heroicons-bars-3",class:"cursor-move text-gray-400"},null,o,i)),t(`<span class="font-medium text-sm"${i}>Definição do Campo</span></div>`),t(S(p,{color:"red",variant:"ghost",icon:"i-heroicons-trash",size:"xs",onClick:l=>e.$emit("remove")},null,o,i)),t("</div>")}),default:l.withCtx((e,a,t,o)=>{if(!a)return[l.createVNode("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-4"},[l.createVNode(m,{label:"Nome do Campo",required:""},{default:l.withCtx(()=>[l.createVNode(f,{modelValue:l.unref(r).name,"onUpdate:modelValue":e=>l.unref(r).name=e,placeholder:"ex. Ano de Lançamento"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l.createVNode(m,{label:"Tipo do Campo",required:""},{default:l.withCtx(()=>[l.createVNode(v,{modelValue:l.unref(r).type,"onUpdate:modelValue":e=>l.unref(r).type=e,options:n},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),["select","multiselect"].includes(l.unref(r).type)?(l.openBlock(),l.createBlock("div",{key:0,class:"md:col-span-2 space-y-3"},[l.createVNode(u,{modelValue:l.unref(r).is_dynamic,"onUpdate:modelValue":e=>l.unref(r).is_dynamic=e,label:"Preencher opções automaticamente com valores existentes no banco",help:"Se marcado, as opções serão carregadas dos itens já cadastrados nesta coleção."},null,8,["modelValue","onUpdate:modelValue"]),l.unref(r).is_dynamic?l.createCommentVNode("",!0):(l.openBlock(),l.createBlock(m,{key:0,label:"Opções (separadas por vírgula)",required:""},{help:l.withCtx(()=>[l.createVNode("span",{class:"text-xs text-gray-500"},"Digite as opções separadas por vírgula.")]),default:l.withCtx(()=>[l.createVNode(f,{modelValue:l.unref(i),"onUpdate:modelValue":e=>l.isRef(i)?i.value=e:null,placeholder:"Opção 1, Opção 2, Opção 3",onBlur:updateOptions},null,8,["modelValue","onUpdate:modelValue"])]),_:1}))])):l.createCommentVNode("",!0),l.createVNode("div",{class:"flex items-center gap-4 mt-2"},[l.createVNode(u,{modelValue:l.unref(r).visible,"onUpdate:modelValue":e=>l.unref(r).visible=e,label:"Visível na Tabela"},null,8,["modelValue","onUpdate:modelValue"]),l.createVNode(u,{modelValue:l.unref(r).required,"onUpdate:modelValue":e=>l.unref(r).required=e,label:"Obrigatório",color:"red"},null,8,["modelValue","onUpdate:modelValue"])])])];a(`<div class="grid grid-cols-1 md:grid-cols-2 gap-4"${o}>`),a(S(m,{label:"Nome do Campo",required:""},{default:l.withCtx((e,a,t,o)=>{if(!a)return[l.createVNode(f,{modelValue:l.unref(r).name,"onUpdate:modelValue":e=>l.unref(r).name=e,placeholder:"ex. Ano de Lançamento"},null,8,["modelValue","onUpdate:modelValue"])];a(S(f,{modelValue:l.unref(r).name,"onUpdate:modelValue":e=>l.unref(r).name=e,placeholder:"ex. Ano de Lançamento"},null,t,o))}),_:1},t,o)),a(S(m,{label:"Tipo do Campo",required:""},{default:l.withCtx((e,a,t,o)=>{if(!a)return[l.createVNode(v,{modelValue:l.unref(r).type,"onUpdate:modelValue":e=>l.unref(r).type=e,options:n},null,8,["modelValue","onUpdate:modelValue"])];a(S(v,{modelValue:l.unref(r).type,"onUpdate:modelValue":e=>l.unref(r).type=e,options:n},null,t,o))}),_:1},t,o)),["select","multiselect"].includes(l.unref(r).type)?(a(`<div class="md:col-span-2 space-y-3"${o}>`),a(S(u,{modelValue:l.unref(r).is_dynamic,"onUpdate:modelValue":e=>l.unref(r).is_dynamic=e,label:"Preencher opções automaticamente com valores existentes no banco",help:"Se marcado, as opções serão carregadas dos itens já cadastrados nesta coleção."},null,t,o)),l.unref(r).is_dynamic?a("\x3c!----\x3e"):a(S(m,{label:"Opções (separadas por vírgula)",required:""},{help:l.withCtx((e,a,t,o)=>{if(!a)return[l.createVNode("span",{class:"text-xs text-gray-500"},"Digite as opções separadas por vírgula.")];a(`<span class="text-xs text-gray-500"${o}>Digite as opções separadas por vírgula.</span>`)}),default:l.withCtx((e,a,t,o)=>{if(!a)return[l.createVNode(f,{modelValue:l.unref(i),"onUpdate:modelValue":e=>l.isRef(i)?i.value=e:null,placeholder:"Opção 1, Opção 2, Opção 3",onBlur:updateOptions},null,8,["modelValue","onUpdate:modelValue"])];a(S(f,{modelValue:l.unref(i),"onUpdate:modelValue":e=>l.isRef(i)?i.value=e:null,placeholder:"Opção 1, Opção 2, Opção 3",onBlur:updateOptions},null,t,o))}),_:1},t,o)),a("</div>")):a("\x3c!----\x3e"),a(`<div class="flex items-center gap-4 mt-2"${o}>`),a(S(u,{modelValue:l.unref(r).visible,"onUpdate:modelValue":e=>l.unref(r).visible=e,label:"Visível na Tabela"},null,t,o)),a(S(u,{modelValue:l.unref(r).required,"onUpdate:modelValue":e=>l.unref(r).required=e,label:"Obrigatório",color:"red"},null,t,o)),a("</div></div>")}),_:1},t))}}}),oe=te.setup;te.setup=(e,a)=>{const t=l.useSSRContext();return(t.modules||(t.modules=new Set)).add("components/FieldDefinition.vue"),oe?oe(e,a):void 0};export{z as _,W as a,te as b,ae as c,X as d};
//# sourceMappingURL=FieldDefinition-WmOpqtMW.mjs.map
