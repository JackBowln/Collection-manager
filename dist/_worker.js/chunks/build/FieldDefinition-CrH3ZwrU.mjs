import{g as e,v as l,m as a,h as t,t as o,o as r,p as i,a as n,_ as u,e as d,c as s,y as c,k as p,z as m,w as f,j as v}from"./server.mjs";import{i as g}from"../_/nitro.mjs";import{u as b,a as y,_ as x}from"./Input-D0kU1oTm.mjs";import{_ as h}from"./Card-Dskk1veu.mjs";import{u as V}from"./useSupabaseClient-CBvWxwze.mjs";import{K as C}from"../_/shared.esm-bundler.mjs";import{A as $,D as k,z as S,y as w,G as N,K as A,C as I,L as _,M as O,N as j}from"../routes/renderer.mjs";const B={wrapper:"relative flex items-start",container:"flex items-center h-5",base:"h-4 w-4 dark:checked:bg-current dark:checked:border-transparent disabled:opacity-50 disabled:cursor-not-allowed focus:ring-0 focus:ring-transparent focus:ring-offset-transparent",form:"form-radio",color:"text-{color}-500 dark:text-{color}-400",background:"bg-white dark:bg-gray-900",border:"border border-gray-300 dark:border-gray-700",ring:"focus-visible:ring-2 focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900",inner:"ms-3 flex flex-col",label:"text-sm font-medium text-gray-700 dark:text-gray-200",required:"text-sm text-red-500 dark:text-red-400",help:"text-sm text-gray-500 dark:text-gray-400",default:{color:"primary"}},R=a(i.ui.strategy,i.ui.textarea,c),U=l.defineComponent({inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rows:{type:Number,default:3},maxrows:{type:Number,default:0},autoresize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},resize:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator:e=>Object.keys(R.size).includes(e)},color:{type:String,default:()=>R.default.color,validator:e=>[...i.ui.colors,...Object.keys(R.color)].includes(e)},variant:{type:String,default:()=>R.default.variant,validator:e=>[...Object.keys(R.variant),...Object.values(R.color).flatMap(e=>Object.keys(e))].includes(e)},textareaClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur","change"],setup(e,{emit:a}){const{ui:i,attrs:n}=t("textarea",l.toRef(e,"ui"),R,l.toRef(e,"class")),{emitFormBlur:u,emitFormInput:d,inputId:s,color:c,size:p,name:f}=b(e,R),v=l.ref(g({},e.modelModifiers,{trim:!1,lazy:!1,number:!1,nullify:!1})),y=l.ref(null),autoResize=()=>{if(e.autoresize){if(!y.value)return;y.value.rows=e.rows;const l=y.value.style.overflow;y.value.style.overflow="hidden";const a=(void 0).getComputedStyle(y.value),t=Number.parseInt(a.paddingTop)+Number.parseInt(a.paddingBottom),o=Number.parseInt(a.lineHeight),{scrollHeight:r}=y.value,i=(r-t)/o;i>e.rows&&(y.value.rows=e.maxrows?Math.min(i,e.maxrows):i),y.value.style.overflow=l}},updateInput=e=>{v.value.trim&&(e=e.trim()),v.value.number&&(e=m(e)),v.value.nullify&&(e||(e=null)),a("update:modelValue",e),d()};l.watch(()=>e.modelValue,()=>{l.nextTick(autoResize)});const x=l.computed(()=>{var l,a;const t=(null==(a=null==(l=i.value.color)?void 0:l[c.value])?void 0:a[e.variant])||i.value.variant[e.variant];return o(r(i.value.base,i.value.form,i.value.rounded,i.value.placeholder,i.value.size[p.value],e.padded?i.value.padding[p.value]:"p-0",null==t?void 0:t.replaceAll("{color}",c.value),!e.resize&&"resize-none"),e.textareaClass)});return{ui:i,attrs:n,name:f,inputId:s,textarea:y,textareaClass:x,onInput:e=>{autoResize(),v.value.lazy||updateInput(e.target.value)},onChange:e=>{const l=e.target.value;a("change",l),v.value.lazy&&updateInput(l),v.value.trim&&(e.target.value=l.trim())},onBlur:e=>{a("blur",e),u()}}}});const z=U.setup;U.setup=(e,a)=>{const t=l.useSSRContext();return(t.modules||(t.modules=new Set)).add("node_modules/@nuxt/ui/dist/runtime/components/forms/Textarea.vue"),z?z(e,a):void 0};const q=e(U,[["ssrRender",function(e,a,t,o,r,i,n,u){let d;a(`<div${$(l.mergeProps({class:e.ui.wrapper},o))}><textarea${$(d=l.mergeProps({id:e.inputId,ref:"textarea",value:e.modelValue,name:e.name,rows:e.rows,required:e.required,disabled:e.disabled,placeholder:e.placeholder,class:e.textareaClass},e.attrs),"textarea")}>${k("value"in d?d.value:"")}</textarea>`),S(e.$slots,"default",{},null,a,t),a("</div>")}]]),P=a(i.ui.strategy,i.ui.radio,B),D=l.defineComponent({inheritAttrs:!1,props:{id:{type:String,default:null},value:{type:[String,Number,Boolean],default:null},modelValue:{type:[String,Number,Boolean,Object],default:null},name:{type:String,default:null},disabled:{type:Boolean,default:!1},help:{type:String,default:null},label:{type:String,default:null},required:{type:Boolean,default:!1},color:{type:String,default:()=>P.default.color,validator:e=>i.ui.colors.includes(e)},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:a}){var i;const{ui:n,attrs:u}=t("radio",l.toRef(e,"ui"),P,l.toRef(e,"class")),d=null!=(i=e.id)?i:l.useId(),s=l.inject("radio-group",null),{emitFormChange:c,color:p,name:m}=null!=s?s:b(e,P),f=l.computed({get:()=>e.modelValue,set(e){a("update:modelValue",e),s||c()}});const v=l.computed(()=>o(r(n.value.base,n.value.form,n.value.background,n.value.border,p.value&&n.value.ring.replaceAll("{color}",p.value),p.value&&n.value.color.replaceAll("{color}",p.value)),e.inputClass));return{inputId:d,ui:n,attrs:u,pick:f,name:m,inputClass:v,onChange:function(e){a("change",e.target.value)}}}});const T=D.setup;D.setup=(e,a)=>{const t=l.useSSRContext();return(t.modules||(t.modules=new Set)).add("node_modules/@nuxt/ui/dist/runtime/components/forms/Radio.vue"),T?T(e,a):void 0};const F=e(D,[["ssrRender",function(e,a,t,o,r,i,n,u){let d;a(`<div${$(l.mergeProps({class:e.ui.wrapper,"data-n-ids":e.attrs["data-n-ids"]},o))}><div class="${I(e.ui.container)}"><input${$((d=l.mergeProps({id:e.inputId,checked:j(e.pick,e.value),name:e.name,required:e.required,value:e.value,disabled:e.disabled,type:"radio",class:e.inputClass},e.attrs),l.mergeProps(d,O(d,e.pick))))}></div>`),e.label||e.$slots.label?(a(`<div class="${I(e.ui.inner)}"><label${A("for",e.inputId)} class="${I(e.ui.label)}">`),S(e.$slots,"label",{label:e.label},()=>{a(`${k(e.label)}`)},a,t),e.required?a(`<span class="${I(e.ui.required)}">*</span>`):a("\x3c!----\x3e"),a("</label>"),e.help||e.$slots.help?(a(`<p class="${I(e.ui.help)}">`),S(e.$slots,"help",{help:e.help},()=>{a(`${k(e.help)}`)},a,t),a("</p>")):a("\x3c!----\x3e"),a("</div>")):a("\x3c!----\x3e"),a("</div>")}]]),L=a(i.ui.strategy,i.ui.radioGroup,{wrapper:"relative flex items-start",fieldset:"",legend:"text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",default:{color:"primary"}}),M=a(i.ui.strategy,i.ui.radio,B),W=l.defineComponent({components:{URadio:F},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Boolean],default:""},name:{type:String,default:null},legend:{type:String,default:null},options:{type:Array,default:()=>[]},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:"value"},disabled:{type:Boolean,default:!1},color:{type:String,default:()=>L.default.color,validator:e=>i.ui.colors.includes(e)},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},uiRadio:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:a}){const{ui:o,attrs:r}=t("radioGroup",l.toRef(e,"ui"),L,l.toRef(e,"class")),{ui:i}=t("radio",l.toRef(e,"uiRadio"),M),{emitFormChange:n,color:u,name:d}=b(e,L,!1);l.provide("radio-group",{color:u,name:d});const guessOptionValue=l=>v(l,e.valueAttribute,v(l,e.optionAttribute)),guessOptionText=l=>v(l,e.optionAttribute,v(l,e.valueAttribute)),guessOptionSelected=l=>e.modelValue===guessOptionValue(l);return{ui:o,uiRadio:i,attrs:r,normalizedOptions:l.computed(()=>e.options.map(e=>(e=>["string","number","boolean"].includes(typeof e)?{value:e,label:e}:{...e,value:guessOptionValue(e),label:guessOptionText(e),selected:guessOptionSelected(e)})(e))),onUpdate:e=>{a("update:modelValue",e),a("change",e),n()}}}});const K=W.setup;W.setup=(e,a)=>{const t=l.useSSRContext();return(t.modules||(t.modules=new Set)).add("node_modules/@nuxt/ui/dist/runtime/components/forms/RadioGroup.vue"),K?K(e,a):void 0};const G=e(W,[["ssrRender",function(e,a,t,o,r,i,n,u){const d=F;a(`<div${$(l.mergeProps({class:e.ui.wrapper},o))}><fieldset${$(l.mergeProps(e.attrs,{class:e.ui.fieldset}))}>`),e.legend||e.$slots.legend?(a(`<legend class="${I(e.ui.legend)}">`),S(e.$slots,"legend",{},()=>{a(`${k(e.legend)}`)},a,t),a("</legend>")):a("\x3c!----\x3e"),a("\x3c!--[--\x3e"),N(e.normalizedOptions,o=>{a(w(d,{key:o.value,label:o.label,"model-value":e.modelValue,value:o.value,help:o.help,disabled:o.disabled||e.disabled,ui:e.uiRadio,onChange:l=>e.onUpdate(o.value)},l.createSlots({_:2},[e.$slots.label?{name:"label",fn:l.withCtx((a,t,r,i)=>{if(!t)return[l.renderSlot(e.$slots,"label",l.mergeProps({ref_for:!0},{option:o,selected:o.selected}))];S(e.$slots,"label",l.mergeProps({ref_for:!0},{option:o,selected:o.selected}),null,t,r,i)}),key:"0"}:void 0,e.$slots.help?{name:"help",fn:l.withCtx((a,t,r,i)=>{if(!t)return[l.renderSlot(e.$slots,"help",l.mergeProps({ref_for:!0},{option:o,selected:o.selected}))];S(e.$slots,"help",l.mergeProps({ref_for:!0},{option:o,selected:o.selected}),null,t,r,i)}),key:"1"}:void 0]),t))}),a("\x3c!--]--\x3e</fieldset></div>")}]]),E=l.defineComponent({__name:"CollectionAccessControl",__ssrInlineRender:!0,props:{modelValue:{},collectionId:{}},emits:["update:modelValue"],setup(e,{emit:a}){const t=e,o=a,r=V(),i=n(),s=l.computed({get:()=>t.modelValue,set:e=>o("update:modelValue",e)}),c=[{value:"private",label:"Privado (Apenas eu)"},{value:"shared",label:"Compartilhado (Usuários específicos)"},{value:"public",label:'Público (Qualquer pessoa pode ver na aba "Explorar")'}],p=l.ref(""),m=l.ref(!1),f=l.ref(!1),v=l.ref([]),loadShares=async()=>{if(!t.collectionId)return;const{data:e,error:l}=await r.from("collection_shares").select("id, user_id, profiles ( id, email, full_name, avatar_url )").eq("collection_id",t.collectionId);!l&&e&&(v.value=e)};l.watch(()=>t.collectionId,loadShares,{immediate:!0});const addUser=async()=>{if(p.value&&t.collectionId){f.value=!0;try{const{data:e,error:l}=await r.from("profiles").select("id").eq("email",p.value).single();if(l||!e)return void i.add({title:"Usuário não encontrado",description:"Nenhum usuário encontrado com este e-mail.",color:"red"});const{error:a}=await r.from("collection_shares").insert({collection_id:t.collectionId,user_id:e.id});if(a){if("23505"!==a.code)throw a;i.add({title:"Já compartilhado",description:"Usuário já tem acesso.",color:"orange"})}else i.add({title:"Adicionado",color:"green"}),p.value="",loadShares()}catch(e){i.add({title:"Erro",description:e.message,color:"red"})}finally{f.value=!1}}},removeUser=async e=>{if(!confirm("Remover acesso para este usuário?"))return;const{error:l}=await r.from("collection_shares").delete().eq("id",e);l?i.add({title:"Erro",description:l.message,color:"red"}):loadShares()};return(e,a,t,o)=>{const r=h,i=G,n=y,g=u,b=d;a(`<div${$(l.mergeProps({class:"space-y-6"},o))}>`),a(w(r,null,{header:l.withCtx((e,a,t,o)=>{if(!a)return[l.createVNode("h3",{class:"font-semibold"},"Configurações de Visibilidade")];a(`<h3 class="font-semibold"${o}>Configurações de Visibilidade</h3>`)}),default:l.withCtx((e,a,t,o)=>{if(!a)return[l.createVNode("div",{class:"space-y-4"},[l.createVNode(i,{modelValue:l.unref(s),"onUpdate:modelValue":e=>l.isRef(s)?s.value=e:null,options:c,legend:"Quem pode ver esta coleção?"},null,8,["modelValue","onUpdate:modelValue"])])];a(`<div class="space-y-4"${o}>`),a(w(i,{modelValue:l.unref(s),"onUpdate:modelValue":e=>l.isRef(s)?s.value=e:null,options:c,legend:"Quem pode ver esta coleção?"},null,t,o)),a("</div>")}),_:1},t)),"shared"===l.unref(s)?a(w(r,null,{header:l.withCtx((e,a,t,o)=>{if(!a)return[l.createVNode("h3",{class:"font-semibold"},"Compartilhado com")];a(`<h3 class="font-semibold"${o}>Compartilhado com</h3>`)}),default:l.withCtx((e,a,t,o)=>{if(!a)return[l.createVNode("div",{class:"space-y-4"},[l.createVNode("div",{class:"flex gap-2"},[l.createVNode(n,{modelValue:l.unref(p),"onUpdate:modelValue":e=>l.isRef(p)?p.value=e:null,placeholder:"Digite o e-mail do usuário...",class:"flex-1",loading:l.unref(m),onKeyup:l.withKeys(addUser,["enter"])},null,8,["modelValue","onUpdate:modelValue","loading"]),l.createVNode(g,{icon:"i-heroicons-paper-airplane",onClick:addUser,loading:l.unref(f)},{default:l.withCtx(()=>[l.createTextVNode("Adicionar")]),_:1},8,["loading"])]),0===l.unref(v).length?(l.openBlock(),l.createBlock("div",{key:0,class:"text-gray-500 text-sm italic"}," Não compartilhado com ninguém ainda. ")):(l.openBlock(),l.createBlock("div",{key:1,class:"space-y-2"},[(l.openBlock(!0),l.createBlock(l.Fragment,null,l.renderList(l.unref(v),e=>{var a,t,o,r;return l.openBlock(),l.createBlock("div",{key:e.id,class:"flex justify-between items-center bg-gray-50 dark:bg-gray-800 p-2 rounded"},[l.createVNode("div",{class:"flex items-center gap-2"},[l.createVNode(b,{src:null==(a=e.profiles)?void 0:a.avatar_url,alt:null==(t=e.profiles)?void 0:t.full_name,size:"xs"},null,8,["src","alt"]),l.createVNode("div",{class:"text-sm"},[l.createVNode("div",{class:"font-medium"},l.toDisplayString((null==(o=e.profiles)?void 0:o.full_name)||"Unknown"),1),l.createVNode("div",{class:"text-xs text-gray-500"},l.toDisplayString(null==(r=e.profiles)?void 0:r.email),1)])]),l.createVNode(g,{icon:"i-heroicons-trash",color:"red",variant:"ghost",size:"xs",onClick:l=>removeUser(e.id)},null,8,["onClick"])])}),128))]))])];a(`<div class="space-y-4"${o}><div class="flex gap-2"${o}>`),a(w(n,{modelValue:l.unref(p),"onUpdate:modelValue":e=>l.isRef(p)?p.value=e:null,placeholder:"Digite o e-mail do usuário...",class:"flex-1",loading:l.unref(m),onKeyup:addUser},null,t,o)),a(w(g,{icon:"i-heroicons-paper-airplane",onClick:addUser,loading:l.unref(f)},{default:l.withCtx((e,a,t,o)=>{if(!a)return[l.createTextVNode("Adicionar")];a("Adicionar")}),_:1},t,o)),a("</div>"),0===l.unref(v).length?a(`<div class="text-gray-500 text-sm italic"${o}> Não compartilhado com ninguém ainda. </div>`):(a(`<div class="space-y-2"${o}>\x3c!--[--\x3e`),N(l.unref(v),e=>{var l,r,i,n;a(`<div class="flex justify-between items-center bg-gray-50 dark:bg-gray-800 p-2 rounded"${o}><div class="flex items-center gap-2"${o}>`),a(w(b,{src:null==(l=e.profiles)?void 0:l.avatar_url,alt:null==(r=e.profiles)?void 0:r.full_name,size:"xs"},null,t,o)),a(`<div class="text-sm"${o}><div class="font-medium"${o}>${k((null==(i=e.profiles)?void 0:i.full_name)||"Unknown")}</div><div class="text-xs text-gray-500"${o}>${k(null==(n=e.profiles)?void 0:n.email)}</div></div></div>`),a(w(g,{icon:"i-heroicons-trash",color:"red",variant:"ghost",size:"xs",onClick:l=>removeUser(e.id)},null,t,o)),a("</div>")}),a("\x3c!--]--\x3e</div>")),a("</div>")}),_:1},t)):a("\x3c!----\x3e"),a("</div>")}}}),Q=E.setup;E.setup=(e,a)=>{const t=l.useSSRContext();return(t.modules||(t.modules=new Set)).add("components/CollectionAccessControl.vue"),Q?Q(e,a):void 0};const H=l.useId,J=a(i.ui.strategy,i.ui.checkbox,{wrapper:"relative flex items-start",container:"flex items-center h-5",base:"h-4 w-4 dark:checked:bg-current dark:checked:border-transparent dark:indeterminate:bg-current dark:indeterminate:border-transparent disabled:opacity-50 disabled:cursor-not-allowed focus:ring-0 focus:ring-transparent focus:ring-offset-transparent",form:"form-checkbox",rounded:"rounded",color:"text-{color}-500 dark:text-{color}-400",background:"bg-white dark:bg-gray-900",border:"border border-gray-300 dark:border-gray-700",ring:"focus-visible:ring-2 focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900",inner:"ms-3 flex flex-col",label:"text-sm font-medium text-gray-700 dark:text-gray-200",required:"text-sm text-red-500 dark:text-red-400",help:"text-sm text-gray-500 dark:text-gray-400",default:{color:"primary"}}),X=l.defineComponent({inheritAttrs:!1,props:{id:{type:String,default:()=>null},value:{type:[String,Number,Boolean,Object],default:null},modelValue:{type:[Boolean,Array],default:null},name:{type:String,default:null},disabled:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:void 0},help:{type:String,default:null},label:{type:String,default:null},required:{type:Boolean,default:!1},color:{type:String,default:()=>J.default.color,validator:e=>i.ui.colors.includes(e)},inputClass:{type:String,default:""},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:a}){var i;const{ui:n,attrs:u}=t("checkbox",l.toRef(e,"ui"),J,l.toRef(e,"class")),{emitFormChange:d,color:s,name:c,inputId:p}=b(e),m=null!=(i=p.value)?i:H(),f=l.computed({get:()=>e.modelValue,set(e){a("update:modelValue",e)}}),v=l.computed(()=>o(r(n.value.base,n.value.form,n.value.rounded,n.value.background,n.value.border,s.value&&n.value.ring.replaceAll("{color}",s.value),s.value&&n.value.color.replaceAll("{color}",s.value)),e.inputClass));return{ui:n,attrs:u,toggle:f,inputId:m,name:c,inputClass:v,onChange:e=>{a("change",e.target.checked),d()}}}});const Y=X.setup;X.setup=(e,a)=>{const t=l.useSSRContext();return(t.modules||(t.modules=new Set)).add("node_modules/@nuxt/ui/dist/runtime/components/forms/Checkbox.vue"),Y?Y(e,a):void 0};const Z=e(X,[["ssrRender",function(e,a,t,o,r,i,n,u){let d;a(`<div${$(l.mergeProps({class:e.ui.wrapper,"data-n-ids":e.attrs["data-n-ids"]},o))}><div class="${I(e.ui.container)}"><input${$((d=l.mergeProps({id:e.inputId,checked:Array.isArray(e.toggle)?_(e.toggle,e.value):e.toggle,name:e.name,required:e.required,value:e.value,disabled:e.disabled,indeterminate:e.indeterminate,type:"checkbox",class:e.inputClass},e.attrs),l.mergeProps(d,O(d,e.toggle))))}></div>`),e.label||e.$slots.label?(a(`<div class="${I(e.ui.inner)}"><label${A("for",e.inputId)} class="${I(e.ui.label)}">`),S(e.$slots,"label",{label:e.label},()=>{a(`${k(e.label)}`)},a,t),e.required?a(`<span class="${I(e.ui.required)}">*</span>`):a("\x3c!----\x3e"),a("</label>"),e.help||e.$slots.help?(a(`<p class="${I(e.ui.help)}">`),S(e.$slots,"help",{help:e.help},()=>{a(`${k(e.help)}`)},a,t),a("</p>")):a("\x3c!----\x3e"),a("</div>")):a("\x3c!----\x3e"),a("</div>")}]]),ee=a(i.ui.strategy,i.ui.select,f),le=l.defineComponent({components:{UIcon:s},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>ee.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>ee.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},size:{type:String,default:null,validator:e=>Object.keys(ee.size).includes(e)},color:{type:String,default:()=>ee.default.color,validator:e=>[...i.ui.colors,...Object.keys(ee.color)].includes(e)},variant:{type:String,default:()=>ee.default.variant,validator:e=>[...Object.keys(ee.variant),...Object.values(ee.color).flatMap(e=>Object.keys(e))].includes(e)},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:"value"},selectClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:a,slots:n}){const{ui:u,attrs:d}=t("select",l.toRef(e,"ui"),ee,l.toRef(e,"class")),{size:s,rounded:c}=p({ui:u,props:e}),{emitFormChange:m,inputId:f,color:g,size:y,name:x}=b(e,ee),h=l.computed(()=>{var e;return null!=(e=s.value)?e:y.value}),guessOptionValue=l=>v(l,e.valueAttribute,""),guessOptionText=l=>v(l,e.optionAttribute,""),normalizeOption=l=>["string","number","boolean"].includes(typeof l)?{[e.valueAttribute]:l,[e.optionAttribute]:l}:{...l,[e.valueAttribute]:guessOptionValue(l),[e.optionAttribute]:guessOptionText(l)},V=l.computed(()=>e.options.map(e=>normalizeOption(e))),C=l.computed(()=>e.placeholder?[{[e.valueAttribute]:"",[e.optionAttribute]:e.placeholder,disabled:!0},...V.value]:V.value),$=l.computed(()=>{const l=normalizeOption(e.modelValue),a=C.value.find(a=>a[e.valueAttribute]===l[e.valueAttribute]);return a?a[e.valueAttribute]:""}),k=l.computed(()=>{var l,a;const t=(null==(a=null==(l=u.value.color)?void 0:l[g.value])?void 0:a[e.variant])||u.value.variant[e.variant];return o(r(u.value.base,u.value.form,c.value,u.value.size[h.value],e.padded?u.value.padding[h.value]:"p-0",null==t?void 0:t.replaceAll("{color}",g.value),(S.value||n.leading)&&u.value.leading.padding[h.value],(w.value||n.trailing)&&u.value.trailing.padding[h.value]),e.placeholder&&!e.modelValue&&u.value.placeholder,e.selectClass)}),S=l.computed(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),w=l.computed(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),N=l.computed(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),A=l.computed(()=>e.loading&&!S.value?e.loadingIcon:e.trailingIcon||e.icon),I=l.computed(()=>r(u.value.icon.leading.wrapper,u.value.icon.leading.pointer,u.value.icon.leading.padding[h.value])),_=l.computed(()=>r(u.value.icon.base,g.value&&i.ui.colors.includes(g.value)&&u.value.icon.color.replaceAll("{color}",g.value),u.value.icon.size[h.value],e.loading&&u.value.icon.loading)),O=l.computed(()=>r(u.value.icon.trailing.wrapper,u.value.icon.trailing.pointer,u.value.icon.trailing.padding[h.value])),j=l.computed(()=>r(u.value.icon.base,g.value&&i.ui.colors.includes(g.value)&&u.value.icon.color.replaceAll("{color}",g.value),u.value.icon.size[h.value],e.loading&&!S.value&&u.value.icon.loading));return{ui:u,attrs:d,name:x,inputId:f,normalizedOptionsWithPlaceholder:C,normalizedValue:$,isLeading:S,isTrailing:w,selectClass:k,leadingIconName:N,leadingIconClass:_,leadingWrapperIconClass:I,trailingIconName:A,trailingIconClass:j,trailingWrapperIconClass:O,onInput:e=>{a("update:modelValue",e.target.value)},onChange:e=>{a("change",e.target.value),m()}}}});const ae=le.setup;le.setup=(e,a)=>{const t=l.useSSRContext();return(t.modules||(t.modules=new Set)).add("node_modules/@nuxt/ui/dist/runtime/components/forms/Select.vue"),ae?ae(e,a):void 0};const te=e(le,[["ssrRender",function(e,a,t,o,r,i,n,u){const d=s;a(`<div${$(l.mergeProps({class:e.ui.wrapper},o))} data-v-cbc9516f><select${$(l.mergeProps({id:e.inputId,name:e.name,value:e.modelValue,required:e.required,disabled:e.disabled,class:e.selectClass},e.attrs))} data-v-cbc9516f>\x3c!--[--\x3e`),N(e.normalizedOptionsWithPlaceholder,(l,t)=>{a("\x3c!--[--\x3e"),l.children?(a(`<optgroup${A("value",l[e.valueAttribute])}${A("label",l[e.optionAttribute])} data-v-cbc9516f>\x3c!--[--\x3e`),N(l.children,(l,t)=>{a(`<option${A("value",l[e.valueAttribute])}${C(l[e.valueAttribute]===e.normalizedValue)?" selected":""}${C(l.disabled)?" disabled":""} data-v-cbc9516f>${k(l[e.optionAttribute])}</option>`)}),a("\x3c!--]--\x3e</optgroup>")):a(`<option${A("value",l[e.valueAttribute])}${C(l[e.valueAttribute]===e.normalizedValue)?" selected":""}${C(l.disabled)?" disabled":""} data-v-cbc9516f>${k(l[e.optionAttribute])}</option>`),a("\x3c!--]--\x3e")}),a("\x3c!--]--\x3e</select>"),e.isLeading&&e.leadingIconName||e.$slots.leading?(a(`<span class="${I(e.leadingWrapperIconClass)}" data-v-cbc9516f>`),S(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>{a(w(d,{name:e.leadingIconName,class:e.leadingIconClass},null,t))},a,t),a("</span>")):a("\x3c!----\x3e"),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(a(`<span class="${I(e.trailingWrapperIconClass)}" data-v-cbc9516f>`),S(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>{a(w(d,{name:e.trailingIconName,class:e.trailingIconClass,"aria-hidden":"true"},null,t))},a,t),a("</span>")):a("\x3c!----\x3e"),a("</div>")}],["__scopeId","data-v-cbc9516f"]]),oe=l.defineComponent({__name:"FieldDefinition",__ssrInlineRender:!0,props:{modelValue:{}},emits:["update:modelValue","remove"],setup(e,{emit:a}){const t=e,o=a,r=l.computed({get:()=>t.modelValue,set:e=>o("update:modelValue",e)}),i=l.ref(r.value.options?r.value.options.join(", "):""),n=[{label:"Texto Curto",value:"text"},{label:"Texto Longo",value:"textarea"},{label:"Número",value:"number"},{label:"Data",value:"date"},{label:"Sim/Não",value:"boolean"},{label:"Seleção (Dropdown)",value:"select"},{label:"Múltipla Seleção",value:"multiselect"}],updateOptions=()=>{i.value.trim()?r.value.options=i.value.split(",").map(e=>e.trim()).filter(Boolean):r.value.options=[]};return l.watch(()=>r.value.type,e=>{["select","multiselect"].includes(e)||(r.value.options=null,i.value="")}),(e,a,t,o)=>{const d=Z,c=s,p=u,m=x,f=y,v=te;a(w(h,l.mergeProps({class:"mb-4 relative"},o),{header:l.withCtx((a,t,o,i)=>{if(!t)return[l.createVNode("div",{class:"flex justify-between items-center"},[l.createVNode("div",{class:"flex items-center gap-2"},[l.createVNode(d,{modelValue:l.unref(r).selected,"onUpdate:modelValue":e=>l.unref(r).selected=e},null,8,["modelValue","onUpdate:modelValue"]),l.createVNode(c,{name:"i-heroicons-bars-3",class:"cursor-move text-gray-400"}),l.createVNode("span",{class:"font-medium text-sm"},"Definição do Campo")]),l.createVNode(p,{color:"red",variant:"ghost",icon:"i-heroicons-trash",size:"xs",onClick:l=>e.$emit("remove")},null,8,["onClick"])])];t(`<div class="flex justify-between items-center"${i}><div class="flex items-center gap-2"${i}>`),t(w(d,{modelValue:l.unref(r).selected,"onUpdate:modelValue":e=>l.unref(r).selected=e},null,o,i)),t(w(c,{name:"i-heroicons-bars-3",class:"cursor-move text-gray-400"},null,o,i)),t(`<span class="font-medium text-sm"${i}>Definição do Campo</span></div>`),t(w(p,{color:"red",variant:"ghost",icon:"i-heroicons-trash",size:"xs",onClick:l=>e.$emit("remove")},null,o,i)),t("</div>")}),default:l.withCtx((e,a,t,o)=>{if(!a)return[l.createVNode("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-4"},[l.createVNode(m,{label:"Nome do Campo",required:""},{default:l.withCtx(()=>[l.createVNode(f,{modelValue:l.unref(r).name,"onUpdate:modelValue":e=>l.unref(r).name=e,placeholder:"ex. Ano de Lançamento"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l.createVNode(m,{label:"Tipo do Campo",required:""},{default:l.withCtx(()=>[l.createVNode(v,{modelValue:l.unref(r).type,"onUpdate:modelValue":e=>l.unref(r).type=e,options:n},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),["select","multiselect"].includes(l.unref(r).type)?(l.openBlock(),l.createBlock(m,{key:0,label:"Opções (separadas por vírgula)",class:"md:col-span-2",required:""},{help:l.withCtx(()=>[l.createVNode("span",{class:"text-xs text-gray-500"},"Digite as opções separadas por vírgula.")]),default:l.withCtx(()=>[l.createVNode(f,{modelValue:l.unref(i),"onUpdate:modelValue":e=>l.isRef(i)?i.value=e:null,placeholder:"Opção 1, Opção 2, Opção 3",onBlur:updateOptions},null,8,["modelValue","onUpdate:modelValue"])]),_:1})):l.createCommentVNode("",!0),l.createVNode("div",{class:"flex items-center gap-4 mt-2"},[l.createVNode(d,{modelValue:l.unref(r).visible,"onUpdate:modelValue":e=>l.unref(r).visible=e,label:"Visível na Tabela"},null,8,["modelValue","onUpdate:modelValue"]),l.createVNode(d,{modelValue:l.unref(r).required,"onUpdate:modelValue":e=>l.unref(r).required=e,label:"Obrigatório",color:"red"},null,8,["modelValue","onUpdate:modelValue"])])])];a(`<div class="grid grid-cols-1 md:grid-cols-2 gap-4"${o}>`),a(w(m,{label:"Nome do Campo",required:""},{default:l.withCtx((e,a,t,o)=>{if(!a)return[l.createVNode(f,{modelValue:l.unref(r).name,"onUpdate:modelValue":e=>l.unref(r).name=e,placeholder:"ex. Ano de Lançamento"},null,8,["modelValue","onUpdate:modelValue"])];a(w(f,{modelValue:l.unref(r).name,"onUpdate:modelValue":e=>l.unref(r).name=e,placeholder:"ex. Ano de Lançamento"},null,t,o))}),_:1},t,o)),a(w(m,{label:"Tipo do Campo",required:""},{default:l.withCtx((e,a,t,o)=>{if(!a)return[l.createVNode(v,{modelValue:l.unref(r).type,"onUpdate:modelValue":e=>l.unref(r).type=e,options:n},null,8,["modelValue","onUpdate:modelValue"])];a(w(v,{modelValue:l.unref(r).type,"onUpdate:modelValue":e=>l.unref(r).type=e,options:n},null,t,o))}),_:1},t,o)),["select","multiselect"].includes(l.unref(r).type)?a(w(m,{label:"Opções (separadas por vírgula)",class:"md:col-span-2",required:""},{help:l.withCtx((e,a,t,o)=>{if(!a)return[l.createVNode("span",{class:"text-xs text-gray-500"},"Digite as opções separadas por vírgula.")];a(`<span class="text-xs text-gray-500"${o}>Digite as opções separadas por vírgula.</span>`)}),default:l.withCtx((e,a,t,o)=>{if(!a)return[l.createVNode(f,{modelValue:l.unref(i),"onUpdate:modelValue":e=>l.isRef(i)?i.value=e:null,placeholder:"Opção 1, Opção 2, Opção 3",onBlur:updateOptions},null,8,["modelValue","onUpdate:modelValue"])];a(w(f,{modelValue:l.unref(i),"onUpdate:modelValue":e=>l.isRef(i)?i.value=e:null,placeholder:"Opção 1, Opção 2, Opção 3",onBlur:updateOptions},null,t,o))}),_:1},t,o)):a("\x3c!----\x3e"),a(`<div class="flex items-center gap-4 mt-2"${o}>`),a(w(d,{modelValue:l.unref(r).visible,"onUpdate:modelValue":e=>l.unref(r).visible=e,label:"Visível na Tabela"},null,t,o)),a(w(d,{modelValue:l.unref(r).required,"onUpdate:modelValue":e=>l.unref(r).required=e,label:"Obrigatório",color:"red"},null,t,o)),a("</div></div>")}),_:1},t))}}}),re=oe.setup;oe.setup=(e,a)=>{const t=l.useSSRContext();return(t.modules||(t.modules=new Set)).add("components/FieldDefinition.vue"),re?re(e,a):void 0};export{q as _,E as a,oe as b,te as c,Z as d};
//# sourceMappingURL=FieldDefinition-CrH3ZwrU.mjs.map
