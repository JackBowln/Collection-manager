import{f as F,g as I,i as L,h as k,c as i,a as e,b as r,d as p,t as l,m as c,w as m,F as w,v as C,p as P,o as a,s as G,A as S,k as H,n as j,x as J}from"./BgoPae_m.js";import{_ as K}from"./DOlqVSc1.js";import{_ as O}from"./DrAkdMnt.js";import{_ as Q}from"./BSzSwfWJ.js";import{u as R}from"./BrtmVOS2.js";import{u as B}from"./Cr_NuOkf.js";import"./D45daGGB.js";import"./BS-tlIyf.js";import"./B3lZKl9Z.js";const W={class:"flex flex-col md:flex-row justify-between items-end mb-10 gap-4"},X={class:"text-3xl font-extrabold tracking-tight text-gray-900 dark:text-white mb-2"},Y={class:"text-primary-500"},Z={class:"space-y-8"},ee={class:"text-lg font-semibold mb-4 flex items-center gap-2"},te={key:0,class:"flex justify-center py-8"},se={key:1,class:"text-center py-8 border-2 border-dashed border-gray-200 dark:border-gray-800 rounded-lg"},oe={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},re={class:"absolute top-0 right-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity z-10"},ae={class:"p-4 flex flex-col h-full"},ie={class:"w-12 h-12 rounded-xl bg-primary-50 dark:bg-primary-900/50 flex items-center justify-center text-primary-500 mb-4 group-hover:scale-110 transition-transform duration-300"},ne={class:"text-xl font-bold text-gray-900 dark:text-white mb-2 line-clamp-1 group-hover:text-primary-500 transition-colors"},le={class:"text-gray-500 dark:text-gray-400 text-sm line-clamp-2 mb-4 flex-1"},ce={class:"flex items-center justify-between pt-4 border-t border-gray-100 dark:border-gray-800"},de={class:"text-xs text-gray-400 font-mono"},pe={class:"text-lg font-semibold mb-4 flex items-center gap-2 text-purple-600 dark:text-purple-400"},me={key:0,class:"text-sm text-gray-400"},ge={key:1,class:"text-center py-8 bg-gray-50 dark:bg-gray-800 rounded-lg"},ue={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},_e={class:"p-4 flex flex-col h-full"},he={class:"flex justify-between items-start mb-3"},xe={class:"w-10 h-10 rounded-lg bg-purple-50 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400"},fe={class:"text-lg font-bold text-gray-900 dark:text-white mb-1 group-hover:text-purple-500 transition-colors"},ye={class:"text-gray-500 text-sm line-clamp-2 mb-4 flex-1"},be={class:"flex items-center gap-2 pt-3 border-t border-gray-100 dark:border-gray-800"},ve={class:"flex flex-col"},ke={class:"text-xs font-medium text-gray-700 dark:text-gray-300"},Ne=F({__name:"index",async setup(we){let n,g;const u=R(),_=I(),h=L(),{data:x,pending:D,refresh:U}=([n,g]=k(async()=>B("my-collections",async()=>{const{data:o,error:t}=await u.from("collections").select("*").eq("user_id",_.value?.id).order("created_at",{ascending:!1});if(t)throw t;return o||[]})),n=await n,g(),n),{data:f,pending:z,refresh:q}=([n,g]=k(async()=>B("shared-collections",async()=>{const{data:o,error:t}=await u.from("collection_shares").select(`
      id,
      collection:collections (
         id, name, description, created_at, visibility,
         owner:profiles ( full_name, avatar_url, email )
      )
    `).eq("user_id",_.value?.id);if(t)throw t;return o||[]})),n=await n,g(),n),A=()=>{U(),q()},N=o=>[[{label:"Editar",icon:"i-heroicons-pencil-square",click:()=>j(`/collections/${o.id}/edit`)}],[{label:"Excluir",icon:"i-heroicons-trash",click:()=>T(o.id)}]],y=o=>{j(`/collections/${o}`)},T=async o=>{if(!confirm("Tem certeza que deseja excluir esta coleção e todos os seus itens?"))return;const{error:t}=await u.from("collections").delete().eq("id",o);t?h.add({title:"Erro",description:t.message,color:"red"}):(h.add({title:"Sucesso",description:"Coleção excluída",color:"green"}),A())};return(o,t)=>{const b=P,d=G,E=K,V=O,v=Q,$=J;return a(),i("div",null,[e("div",W,[e("div",null,[e("h1",X,[t[1]||(t[1]=p(" Bem-vindo, ",-1)),e("span",Y,l(c(_)?.user_metadata.full_name?.split(" ")[0]),1)]),t[2]||(t[2]=e("p",{class:"text-gray-500 dark:text-gray-400"},"Gerencie suas coleções ou descubra novidades.",-1))]),r(b,{to:"/collections/new",icon:"i-heroicons-plus",size:"lg",class:"shadow-lg shadow-primary-500/20 hover:scale-105 transition-transform"},{default:m(()=>[...t[3]||(t[3]=[p(" Nova Coleção ",-1)])]),_:1})]),e("div",Z,[e("section",null,[e("h2",ee,[r(d,{name:"i-heroicons-user"}),t[4]||(t[4]=p(" Minhas Coleções ",-1))]),c(D)?(a(),i("div",te,[r(d,{name:"i-heroicons-arrow-path",class:"w-8 h-8 animate-spin text-gray-400"})])):c(x)?.length===0?(a(),i("div",se,[...t[5]||(t[5]=[e("p",{class:"text-gray-500"},"Você não tem coleções criadas.",-1)])])):(a(),i("div",oe,[(a(!0),i(w,null,C(c(x),s=>(a(),S(v,{key:s.id,class:"group cursor-pointer border-0 ring-1 ring-gray-200 dark:ring-gray-800 shadow-sm hover:shadow-xl hover:ring-primary-500/50 dark:hover:ring-primary-500/50 transition-all duration-300 transform hover:-translate-y-1 bg-white dark:bg-gray-900 overflow-hidden",onClick:M=>y(s.id)},{default:m(()=>[e("div",re,[r(E,{items:N(s),onClick:t[0]||(t[0]=H(()=>{},["stop"]))},{default:m(()=>[r(b,{color:"gray",variant:"soft",icon:"i-heroicons-ellipsis-vertical",size:"xs"})]),_:1},8,["items"])]),e("div",ae,[e("div",ie,[r(d,{name:"i-heroicons-folder",class:"w-7 h-7"})]),e("h3",ne,l(s.name),1),e("p",le,l(s.description||"Sem descrição definida."),1),e("div",ce,[e("span",de,l(new Date(s.created_at).toLocaleDateString()),1),r(V,{size:"xs",variant:"subtle",color:s.visibility==="public"?"green":s.visibility==="shared"?"purple":"gray"},{default:m(()=>[p(l(s.visibility==="public"?"Público":s.visibility==="shared"?"Compartilahdo":"Privado"),1)]),_:2},1032,["color"])])])]),_:2},1032,["onClick"]))),128))]))]),e("section",null,[e("h2",pe,[r(d,{name:"i-heroicons-users"}),t[6]||(t[6]=p(" Compartilhado Comigo ",-1))]),c(z)?(a(),i("div",me,"Carregando compartilhamentos...")):c(f)?.length===0?(a(),i("div",ge,[...t[7]||(t[7]=[e("p",{class:"text-gray-500 text-sm"},"Ninguém compartilhou coleções com você ainda.",-1)])])):(a(),i("div",ue,[(a(!0),i(w,null,C(c(f),s=>(a(),S(v,{key:s.collection.id,class:"group cursor-pointer border-0 ring-1 ring-purple-100 dark:ring-purple-900/30 shadow-sm hover:shadow-purple-500/20 hover:ring-purple-500/50 transition-all duration-300 transform hover:-translate-y-1 bg-white dark:bg-gray-900",onClick:M=>y(s.collection.id)},{default:m(()=>[e("div",_e,[e("div",he,[e("div",xe,[r(d,{name:"i-heroicons-folder-open",class:"w-6 h-6"})]),r(d,{name:"i-heroicons-eye",class:"text-gray-300 group-hover:text-purple-500 transition-colors"})]),e("h3",fe,l(s.collection.name),1),e("p",ye,l(s.collection.description||"Sem descrição"),1),e("div",be,[r($,{src:s.collection.owner?.avatar_url,size:"xs",class:"ring-2 ring-white dark:ring-gray-900"},null,8,["src"]),e("div",ve,[t[8]||(t[8]=e("span",{class:"text-[10px] text-gray-400 uppercase tracking-wider font-semibold"},"Compartilhado por",-1)),e("span",ke,l(s.collection.owner?.full_name||"Desconhecido"),1)])])])]),_:2},1032,["onClick"]))),128))]))])])])}}});export{Ne as default};
